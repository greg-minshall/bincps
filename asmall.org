* A small contribution to income inequality analysis

** misc :noexport:

XXX can't use without "x" in front, or crash... [[https://stackoverflow.com/q/18162477][xcall_XXX()]] to get
(more-or-less) inline:
#+name: test
#+BEGIN_SRC sh :exports none :results output
echo 4
#+END_SRC

this
#+call: test() :results output raw
is a test

here call_test()[:results org] is another test

** meta :noexport:

the following takes (what should be links ending in) strings that end
in ".IMG" and changes them to end in either ".pdf" or ".png",
depending on whether the current export is to latex or html.

this is definitely a sledge hammer approach.  there are other
techniques that seem promising, in particular using org-mode's
'#+BIND' keyword with org-export-filter-link-functions, but i was
unable to make that work.

this code runs as org-mode starts to export, and changes everything
under the sun.
#+BEGIN_SRC emacs-lisp :exports results :results none
  (defun get-image-names (backend)
    (let ((rment (if (equal backend 'html) ".png" ".pdf"))
          (case-fold-search nil))
      (while (re-search-forward "[.]IMG\\>" nil t)
        (replace-match rment t))))
  (add-hook 'org-export-before-parsing-hook 'get-image-names)
#+END_SRC

** Introduction

in a [[https://twitter.com/kltblom/status/932394678241988609][Tweet]] from 19 November, 2017, Kristian Blom showed [[file:./DPCIA2AUQAEO0lv.jpg][a histogram]]
(1971-2015), from Financial Times (based on data from Pew Trust).
Blom asked, given that the past forty-plus years has seen *everyone*
do better, should we be worried about the growing inequality?

Blom showed the following graphic, apparently from a video from the
Financial Times.

[[file:DPCIA2AUQAEO0lv.jpg]]

While Blom's question was asking for a qualitative answer, here I
treat the question technically.

** The data

For me, i felt the need to see the data as a (empirical) cumulative
function ([[https://en.wikipedia.org/wiki/Cumulative_distribution_function][CDF]]) to really understand what was going on.  Using data
from [[http://www.ipums.org][IPUMS-CS]], I was able to create the following graphic (which is
presented in 1999 dollars, not the2014 dollars of the FT graph):

[[file:repro.IMG]]

This is not by any means exactly as the FT graphic Blom tweeted.
However, if you squint, it is roughly the same.

If you will grant me that the two graphs represent the same
distribution of household incomes, then we can now look at the CDF of
the dataset underlying the second graphic:

[[file:ecdf.IMG]]

In the above, we see that about 30% of US households have done better
in the years since 1972.  If we blow up the section for household
incomes below $50,000, we can see what happens around that area in
more detail:

[[file:ecdf2.IMG]]

Here it becomes clearer that for somewhat more than one quarter of US
households, the years since 1972 have not improved their economic lot,
have, in fact, made their economic situation worse.

In 1972, 23% of US households made less than $20,000; by 2016, that
number has increased to 26%. ???


** Appendices
*** CDF
*** Methodological problems

**** High income issues

not enough data points?  Piketty, Saez, et al.  show number of data
points per income group (i.e., *not* multiplied by HWTSUPP).  (does
problem affect lower income groups as well?)

file:histo.hhbracket99-both.IMG

ignoring the hump around 200,000 dollars for the year 1972 (see the
section [[oddities]]), it is clear that very few respondents have high
incomes.

while it's not apparent in this graphic, incomes below around 5,000,
6,000 dollars also have a small number of respondents.  if we just
look at 1972, we see this:

file:histo.hhbracket99-1972.IMG

**** Low income issues

low income quality of life may be highly influenced by social "safety
net" (welfare) programs.  so, loss of N% over 40 years may not
translate to an N% lower quality of life.

*** Most reported incomes

*** Who gets what percent of the national income?

A lot of money is paid out in income in the United States.  How is
this money distributed among the various income groups?  Here is a CDF
which shows what percent of the total national income is paid out to
which income groups in the US.

HHBRACKET99*HWTSUPP/sum(HHBRACKET99*HWTSUPP)

*** Where have all the flowers gone

the national income has increased from 9.876136e+12 in 1972 to
2.005585e+13 in 2016.  who got all this money?

in 1972, .5 of pop made 42000 or less, .9 of pop made 85000 or less
in 2014, .5 of pop made 47000 or less, .9 of pop made 126000 or less

[[file:totalincome.distribution.IMG]]

*** oddities

the IPUMS data set starts in 1962.  but, from 1962 through 1967, it
contains no actual reported incomes.

from 1968 through 1975, the reported incomes appear to have been
capped at 50,000 dollars.  it *appears* as if incomes greater than
50,000 dollars were reported as 50,000 dollars.  (for example, one
sees a hump at the 1999 equivalent of 50,000 1972 dollars (a bit over
200,000 1999 dollars) in the figure in [[High income issues]].

from 1976, onwards, we see no evidence of such a cap on reported
income.
** Acknowledgements

First, I would like to acknowledge the great database that [[http://www.ipums.org][IPUMS-CS]]
has made available:
#+BEGIN_QUOTE
Sarah Flood, Miriam King, Steven Ruggles, and J. Robert
Warren. Integrated Public Use Microdata Series, Current Population
Survey: Version 5.0 [dataset]. Minneapolis, MN: University of
Minnesota, 2017.  https://doi.org/10.18128/D030.V5.0
#+END_QUOTE

Second, my analysis has been done in the R statistical programming
environment, and my thanks to the team that develops R:
#+BEGIN_QUOTE
R Core Team (2017). R: A language and environment for statistical
computing. R Foundation for Statistical Computing, Vienna, Austria.
URL https://www.R-project.org/.
#+END_QUOTE

Third, my approach to anything statistical is indebted to [[https://en.wikipedia.org/wiki/John_Tukey][John Tukey]]'s
[[https://en.wikipedia.org/wiki/Exploratory_data_analysis][/Exploratory Data Analysis/]], a book I highly recommend.
